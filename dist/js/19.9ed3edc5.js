"use strict";(self["webpackChunke_commerce"]=self["webpackChunke_commerce"]||[]).push([[19],{6019:function(t,e,s){s.r(e),s.d(e,{default:function(){return k}});var r=s(3396),c=s(7139),i=s(9242);const o={class:"row py-5 bg-white"},l={class:"col-sm-3 col-lg-2 mb-4"},a=["onClick"],d={class:"col-sm-9 col-lg-10"},n=["value"],u={class:"row row-cols-1 row-cols-md-2 row-cols-lg-3 g-3"},h={class:"card h-100"},p=["src","alt"],g={class:"card-body d-flex flex-column justify-content-between"},y={class:"card-title"},f=["onClick"],w={class:"card-text d-flex justify-content-between align-items-center"},v={class:"text-dark text-decoration-line-through"},m={class:"text-danger fw-bold fs-5"};function P(t,e,s,P,_,S){const b=(0,r.up)("VLoading");return(0,r.wg)(),(0,r.iD)("div",o,[(0,r._)("div",l,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(_.type,(t=>((0,r.wg)(),(0,r.iD)("div",{class:"list-group fs-5",key:t},[(0,r._)("button",{class:(0,c.C_)(["list-group-item list-group-item-action",{active:_.active===t.engType}]),type:"button",onClick:e=>S.selectType(t.engType)},(0,c.zw)(t.chtType),11,a)])))),128))]),(0,r._)("div",d,[(0,r.Wm)(b,{active:_.isLoading},null,8,["active"]),(0,r.wy)((0,r._)("select",{class:"border-dark d-md-block rounded p-2 mb-4 ms-auto","onUpdate:modelValue":e[0]||(e[0]=t=>_.selected=t),onChange:e[1]||(e[1]=(...t)=>S.getSort&&S.getSort(...t))},[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(_.sort,(t=>((0,r.wg)(),(0,r.iD)("option",{key:t,value:t.engSort},(0,c.zw)(t.chtSort),9,n)))),128))],544),[[i.bM,_.selected]]),(0,r._)("div",u,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(_.filterProducts,(e=>((0,r.wg)(),(0,r.iD)("div",{class:"col",key:e.id},[(0,r._)("div",h,[(0,r._)("img",{src:e.imageUrl,class:"card-img-top w-100",alt:e.title},null,8,p),(0,r._)("div",g,[(0,r._)("h3",y,[(0,r._)("a",{href:"#",class:"stretched-link style",onClick:(0,i.iM)((t=>S.getProduct(e.id)),["prevent"])},(0,c.zw)(e.title),9,f)]),(0,r._)("div",w,[(0,r._)("span",v," $"+(0,c.zw)(t.$filters.currency(e.origin_price)),1),(0,r._)("span",m," $"+(0,c.zw)(t.$filters.currency(e.price)),1)])])])])))),128))])])])}var _={data(){return{products:[],product:{},filterProducts:[],isLoading:!1,active:"all",type:[{chtType:"全部",engType:"all"},{chtType:"飼料",engType:"feed"},{chtType:"罐頭",engType:"canned"},{chtType:"玩具",engType:"toy"}],selected:"filterSort",sort:[{chtSort:"排序篩選",engSort:"filterSort"},{chtSort:"價格 : 低到高",engSort:"lowPrice"},{chtSort:"價格 : 高到低",engSort:"highPrice"}]}},watch:{$route(){this.$router.go(0)}},methods:{getShoppingProducts(){const t="https://vue3-course-api.hexschool.io/api/noi-api/products/all";return new Promise(((e,s)=>{this.isLoading=!0,this.$http.get(t).then((t=>{this.isLoading=!1,t.data.success&&(this.products=t.data.products,this.filterProducts=this.products),e()})).catch((t=>{this.isLoading=!1,this.$alert("sorry，目前服務不可用，請稍後再試或聯絡管理員。"),s(t)}))}))},selectType(t){this.active=t,this.filterProducts="all"===t?this.products:this.products.filter((e=>e.category===t))},getSort(){"lowPrice"===this.selected?this.filterProducts.sort(((t,e)=>t.price-e.price)):"highPrice"===this.selected&&this.filterProducts.sort(((t,e)=>e.price-t.price))},getSearchFilterProducts(){const t=this.$route.query.search;this.getShoppingProducts().then((()=>{""===t?this.$alert("欄位不可為空白"):(this.active="",this.filterProducts=this.products.filter((e=>{const s=e.title.search(t);return-1!==s})))}))},getProduct(t){this.$router.push(`/user/product/${t}`)}},created(){void 0===this.$route.query.search?this.getShoppingProducts().then((()=>{})):this.getSearchFilterProducts()}},S=s(89);const b=(0,S.Z)(_,[["render",P],["__scopeId","data-v-07b0fd7e"]]);var k=b}}]);
//# sourceMappingURL=19.9ed3edc5.js.map