"use strict";(self["webpackChunke_commerce"]=self["webpackChunke_commerce"]||[]).push([[930],{2734:function(t,a){const s={updateOrderFailed:"更新失敗,請稍後再試"};a["Z"]=(t,a)=>{s[a]?t(s[a]):t("sorry，目前服務不可用，請稍後再試或聯絡管理員。")}},1870:function(t,a,s){s.d(a,{Z:function(){return u}});var e=s(3396),i=s(8138);const n=(0,e._)("img",{src:i,alt:""},null,-1);function o(t,a,s,i,o,r){const c=(0,e.up)("VLoading");return(0,e.wg)(),(0,e.j4)(c,{active:o.isLoading},{default:(0,e.w5)((()=>[n])),_:1},8,["active"])}var r={props:{loading:{type:Boolean}},data(){return{isLoading:!1}},watch:{loading(){this.isLoading=this.loading}}},c=s(89);const d=(0,c.Z)(r,[["render",o]]);var u=d},7738:function(t,a,s){s.d(a,{Z:function(){return p}});var e=s(3396),i=s(7139);const n={class:"bi bi-cart-check icon position-relative text-info"},o={class:"position-absolute translate-middle badge rounded-pill bg-danger"};function r(t,a,s,r,c,d){const u=(0,e.up)("router-link");return(0,e.wg)(),(0,e.j4)(u,{to:"/user/cart"},{default:(0,e.w5)((()=>[(0,e._)("i",n,[(0,e._)("span",o,(0,i.zw)(c.shoppingCarts.length),1)])])),_:1})}s(1703);var c=s(2734),d={data(){return{shoppingCarts:[]}},methods:{async getShoppingCarts(){try{const t=`${this.$apiUrl}/cart`,a=await this.$http.get(t);if(!a.data.success)throw new Error("updateOrderFailed");this.shoppingCarts=a.data.data.carts}catch(t){(0,c.Z)(this.$alert,t.message)}}},async mounted(){await this.getShoppingCarts()}},u=s(89);const l=(0,u.Z)(d,[["render",r],["__scopeId","data-v-472e7572"]]);var p=l},5930:function(t,a,s){s.r(a),s.d(a,{default:function(){return O}});var e=s(3396),i=s(7139),n=s(9242);const o=t=>((0,e.dD)("data-v-e81f0e60"),t=t(),(0,e.Cn)(),t),r={class:"row row-cols-1 row-cols-md-2 bg-white py-5 gy-5"},c={class:"col"},d={id:"carouselExampleIndicators",class:"carousel slide","data-bs-ride":"carousel"},u={class:"carousel-inner"},l=["src"],p=(0,e.uE)('<button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev" data-v-e81f0e60><span class="carousel-control-prev-icon" aria-hidden="true" data-v-e81f0e60></span><span class="visually-hidden" data-v-e81f0e60>Previous</span></button><button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next" data-v-e81f0e60><span class="carousel-control-next-icon" aria-hidden="true" data-v-e81f0e60></span><span class="visually-hidden" data-v-e81f0e60>Next</span></button>',2),h={class:"col"},g={class:"text-center mb-5"},f={key:0},y=o((()=>(0,e._)("p",null,"產品特色 : ",-1))),w=[y],b={key:1,class:"text-dark text-decoration-line-through me-3"},m={key:2,class:"text-danger fw-bold fs-5 me-3"},v={key:3,class:"text-danger fw-bold fs-5 me-3"},_={key:4,class:"badge rounded-pill bg-info fs-6"},k=o((()=>(0,e._)("br",null,null,-1))),$={for:"amount",class:"d-flex align-items-center my-3"},x=(0,e.Uk)("數量: "),C=["disabled"],q=["disabled"],D=o((()=>(0,e._)("i",{class:"bi bi-cart-plus me-2 fs-5"},null,-1))),Z=(0,e.Uk)("加入購物車"),L=[D,Z];function z(t,a,s,o,y,D){const Z=(0,e.up)("Loading"),z=(0,e.up)("Cart");return(0,e.wg)(),(0,e.iD)(e.HY,null,[(0,e.Wm)(Z,{loading:y.isLoading},null,8,["loading"]),(0,e._)("div",r,[(0,e._)("div",c,[(0,e._)("div",d,[(0,e._)("div",u,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(y.product.imagesUrl,((t,a)=>((0,e.wg)(),(0,e.iD)("div",{class:(0,i.C_)(["carousel-item",{active:y.active===a}]),key:t},[(0,e._)("img",{src:t,class:"d-block",alt:"img"},null,8,l)],2)))),128))]),p])]),(0,e._)("div",h,[(0,e._)("h3",g,(0,i.zw)(y.product.title),1),y.feature.length>0?((0,e.wg)(),(0,e.iD)("strong",f,w)):(0,e.kq)("",!0),((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(y.feature,(t=>((0,e.wg)(),(0,e.iD)("p",{key:t},(0,i.zw)(t),1)))),128)),10!==y.discount?((0,e.wg)(),(0,e.iD)("span",b," 原價 : $"+(0,i.zw)(t.$filters.currency(y.product.origin_price)),1)):(0,e.kq)("",!0),10!==y.discount?((0,e.wg)(),(0,e.iD)("span",m," 優惠 : $"+(0,i.zw)(t.$filters.currency(y.product.price)),1)):((0,e.wg)(),(0,e.iD)("span",v," 價格 : $"+(0,i.zw)(t.$filters.currency(y.product.price)),1)),10!==y.discount?((0,e.wg)(),(0,e.iD)("span",_,"約"+(0,i.zw)(y.discount)+"折",1)):(0,e.kq)("",!0),k,(0,e._)("label",$,[x,(0,e._)("button",{class:"ms-5 symbol",disabled:1===y.quantity,onClick:a[0]||(a[0]=t=>D.count(-1))},"-",8,C),(0,e.wy)((0,e._)("input",{id:"amount",class:"text-center",type:"number","onUpdate:modelValue":a[1]||(a[1]=t=>y.quantity=t)},null,512),[[n.nr,y.quantity]]),(0,e._)("button",{class:"symbol",disabled:10===y.quantity,onClick:a[2]||(a[2]=t=>D.count(1))},"+",8,q)]),(0,e._)("button",{type:"button",class:"btn btn-outline-info",onClick:a[3]||(a[3]=(...t)=>D.addProductToShoppingCart&&D.addProductToShoppingCart(...t))},L)])]),(0,e.Wm)(z,{class:"position-fixed fixed"})],64)}s(1703);var E=s(2734),U=s(1870),I=s(7738),P={data(){return{product:{},id:"",isLoading:!1,active:0,feature:[],discount:null,quantity:1}},components:{Loading:U.Z,Cart:I.Z},watch:{product(){void 0!==this.product.content&&(this.feature=this.product.content.split("\n")),this.discount=Math.round(this.product.price/this.product.origin_price*100)/10},quantity(){this.quantity<1?this.quantity=1:this.quantity>10&&(this.quantity=10)}},methods:{async getProduct(){try{const t=`${this.$apiUrl}/product/${this.id}`;this.isLoading=!0;const a=await this.$http.get(t);if(!a.data.success)throw new Error("updateOrderFailed");this.product=a.data.product}catch(t){(0,E.Z)(this.$alert,t.message)}finally{this.isLoading=!1}},count(t){this.quantity+=t},async addProductToShoppingCart(){try{const t=`${this.$apiUrl}/cart`,a={product_id:this.product.id,qty:this.quantity},s=await this.$http.post(t,{data:a});if(!s.data.success)throw new Error("updateOrderFailed");this.$alert("此產品已加入購物車"),setTimeout((()=>{this.$router.go(0)}),1e3)}catch(t){(0,E.Z)(this.$alert,t.message)}}},async mounted(){this.id=this.$route.params.productId,await this.getProduct()}},S=s(89);const F=(0,S.Z)(P,[["render",z],["__scopeId","data-v-e81f0e60"]]);var O=F},8138:function(t,a,s){t.exports=s.p+"img/loadingCat.d60cde16.gif"}}]);
//# sourceMappingURL=930.5fb0253f.js.map