"use strict";(self["webpackChunke_commerce"]=self["webpackChunke_commerce"]||[]).push([[293],{2734:function(t,e){const s={updateOrderFailed:"更新失敗,請稍後再試"};e["Z"]=(t,e)=>{s[e]?t(s[e]):t("sorry，目前服務不可用，請稍後再試或聯絡管理員。")}},1870:function(t,e,s){s.d(e,{Z:function(){return d}});var i=s(3396),r=s(8138);const a=(0,i._)("img",{src:r,alt:""},null,-1);function o(t,e,s,r,o,c){const n=(0,i.up)("VLoading");return(0,i.wg)(),(0,i.j4)(n,{active:o.isLoading},{default:(0,i.w5)((()=>[a])),_:1},8,["active"])}var c={props:{loading:{type:Boolean}},data(){return{isLoading:!1}},watch:{loading(){this.isLoading=this.loading}}},n=s(89);const l=(0,n.Z)(c,[["render",o]]);var d=l},7738:function(t,e,s){s.d(e,{Z:function(){return g}});var i=s(3396),r=s(7139);const a={class:"bi bi-cart-check icon position-relative text-info"},o={class:"position-absolute translate-middle badge rounded-pill bg-danger"};function c(t,e,s,c,n,l){const d=(0,i.up)("router-link");return(0,i.wg)(),(0,i.j4)(d,{to:"/user/cart"},{default:(0,i.w5)((()=>[(0,i._)("i",a,[(0,i._)("span",o,(0,r.zw)(n.shoppingCarts.length),1)])])),_:1})}s(1703);var n=s(2734),l={data(){return{shoppingCarts:[]}},methods:{async getShoppingCarts(){try{const t=`${this.$apiUrl}/cart`,e=await this.$http.get(t);if(!e.data.success)throw new Error("updateOrderFailed");this.shoppingCarts=e.data.data.carts}catch(t){(0,n.Z)(this.$alert,t.message)}}},async mounted(){await this.getShoppingCarts()}},d=s(89);const u=(0,d.Z)(l,[["render",c],["__scopeId","data-v-472e7572"]]);var g=u},8293:function(t,e,s){s.r(e),s.d(e,{default:function(){return z}});var i=s(3396),r=s(7139),a=s(9242),o=s(2691);const c=t=>((0,i.dD)("data-v-47a4ea84"),t=t(),(0,i.Cn)(),t),n={class:"row py-5 bg-white flex-column justify-content-center"},l=(0,i.uE)('<div class="banner" data-v-47a4ea84><img src="'+o+'" class="d-block w-100 bannerImg" alt="全館滿499元免運" data-v-47a4ea84><div class="bannerContent bg-special text-white" data-v-47a4ea84><h3 class="text-danger" data-v-47a4ea84>什麼 !?</h3><p data-v-47a4ea84>輸入折扣碼 : <strong class="text-nowrap" data-v-47a4ea84>我是貓奴</strong></p><p class="text-nowrap" data-v-47a4ea84>全館再打八折</p></div></div>',1),d={class:"col mb-4 d-sm-flex justify-content-center pt-5"},u=["onClick"],g={class:"col"},p=["value","disabled"],h={key:0,class:"row row-cols-2 row-cols-sm-3 row-cols-lg-4 g-3"},f={class:"card h-100"},v=["src","alt"],y=["onClick"],w={class:"card-body d-flex flex-column justify-content-between"},m={class:"card-title"},b=["onClick"],_={class:"card-text d-flex justify-content-between align-items-center"},S={class:"text-dark text-decoration-line-through text-nowrap"},k={class:"text-danger fw-bold fs-5 text-nowrap"},x={key:1,class:"text-center"},C=c((()=>(0,i._)("p",{class:"h3"},"查無資料，請重新搜尋關鍵字或等候上架。",-1))),$=[C];function P(t,e,s,o,c,C){const P=(0,i.up)("Loading"),T=(0,i.up)("Cart");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",n,[l,(0,i._)("div",d,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(c.type,(t=>((0,i.wg)(),(0,i.iD)("div",{class:"list-group fs-5 mx-2",key:t},[(0,i._)("button",{class:(0,r.C_)(["list-group-item list-group-item-action",{active:c.active===t.engType}]),type:"button",onClick:e=>C.selectType(t.engType)},(0,r.zw)(t.chtType),11,u)])))),128))]),(0,i._)("div",g,[(0,i.Wm)(P,{loading:c.isLoading},null,8,["loading"]),(0,i.wy)((0,i._)("select",{class:"border-dark d-sm-block rounded p-2 mb-4 ms-auto","onUpdate:modelValue":e[0]||(e[0]=t=>c.selected=t),onChange:e[1]||(e[1]=(...t)=>C.getSort&&C.getSort(...t))},[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(c.sort,(t=>((0,i.wg)(),(0,i.iD)("option",{key:t,value:t.engSort,disabled:"filterSort"===t.engSort},(0,r.zw)(t.chtSort),9,p)))),128))],544),[[a.bM,c.selected]]),0!==c.filterProducts.length?((0,i.wg)(),(0,i.iD)("div",h,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(c.filterProducts,(e=>((0,i.wg)(),(0,i.iD)("div",{class:"col",key:e.id},[(0,i._)("div",f,[(0,i._)("img",{src:e.imageUrl,class:"card-img-top",alt:e.title},null,8,v),(0,i._)("button",{type:"button",class:"toggle border-0",onClick:t=>C.toggleFavorites(e)},[(0,i._)("i",{class:(0,r.C_)(["bi bi-heart-fill",{active:c.myFavorites.includes(e.id)}])},null,2)],8,y),(0,i._)("div",w,[(0,i._)("h3",m,[(0,i._)("a",{href:"#",class:"stretched-link style",onClick:(0,a.iM)((t=>C.getProduct(e.id)),["prevent"])},(0,r.zw)(e.title),9,b)]),(0,i._)("div",_,[(0,i._)("span",S," $"+(0,r.zw)(t.$filters.currency(e.origin_price)),1),(0,i._)("span",k," $"+(0,r.zw)(t.$filters.currency(e.price)),1)])])])])))),128))])):((0,i.wg)(),(0,i.iD)("div",x,$))])]),(0,i.Wm)(T,{class:"position-fixed fixed"})],64)}s(1703);var T=s(2734),F=s(1870),D=s(7738),L={data(){return{products:[],product:{},filterProducts:[],myFavorites:[],isLoading:!1,active:"all",type:[{chtType:"全部",engType:"all"},{chtType:"飼料",engType:"feed"},{chtType:"罐頭",engType:"canned"},{chtType:"玩具",engType:"toy"},{chtType:"我的最愛",engType:"favorites"}],selected:"filterSort",sort:[{chtSort:"排序篩選",engSort:"filterSort"},{chtSort:"價格 : 低到高",engSort:"lowPrice"},{chtSort:"價格 : 高到低",engSort:"highPrice"}]}},components:{Loading:F.Z,Cart:D.Z},watch:{$route(){this.$router.go(0)}},methods:{async getShoppingProducts(){try{const t=`${this.$apiUrl}/products/all`;this.isLoading=!0;const e=await this.$http.get(t);if(!e.data.success)throw new Error("updateOrderFailed");this.products=e.data.products,this.filterProducts=this.products}catch(t){(0,T.Z)(this.$alert,t.message)}finally{this.isLoading=!1}},selectType(t){this.active=t,this.filterProducts="all"===t?this.products:"favorites"===t?this.products.filter((t=>{for(let e=0;e<this.myFavorites.length;e+=1)if(t.id===this.myFavorites[e])return!0;return!1})):this.products.filter((e=>e.category===t))},getSort(){"lowPrice"===this.selected?this.filterProducts.sort(((t,e)=>t.price-e.price)):"highPrice"===this.selected&&this.filterProducts.sort(((t,e)=>e.price-t.price))},toggleFavorites(t){console.log(1);const e=JSON.parse(localStorage.getItem("favorites"))||[];if(e.includes(t.id))for(let s=0;s<e.length;s+=1)e[s]===t.id&&e.splice(s,1);else e.push(t.id);localStorage.setItem("favorites",JSON.stringify(e)),this.myFavorites=e},async getSearchFilterProducts(){const t=this.$route.query.search;await this.getShoppingProducts(),""===t?this.$alert("欄位不可為空白"):(this.active="",this.filterProducts=this.products.filter((e=>e.title.includes(t))))},getProduct(t){this.$router.push(`/user/product/${t}`)}},async mounted(){if(void 0===this.$route.query.search){await this.getShoppingProducts();const{category:t}=this.$route.query;void 0!==t&&this.selectType(t)}else await this.getSearchFilterProducts();this.myFavorites=JSON.parse(localStorage.getItem("favorites"))||[]}},Z=s(89);const j=(0,Z.Z)(L,[["render",P],["__scopeId","data-v-47a4ea84"]]);var z=j},8138:function(t,e,s){t.exports=s.p+"img/loadingCat.d60cde16.gif"},2691:function(t,e,s){t.exports=s.p+"img/productsCat.ec94f2ee.png"}}]);
//# sourceMappingURL=293.99b1e8f2.js.map